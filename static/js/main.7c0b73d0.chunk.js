/*! For license information please see main.7c0b73d0.chunk.js.LICENSE.txt */
(this["webpackJsonpbabylonjs-cra-vanilla-ts"]=this["webpackJsonpbabylonjs-cra-vanilla-ts"]||[]).push([[0],{351:function(e,n,t){e.exports=t(359)},356:function(e,n,t){},357:function(e,n,t){},359:function(e,n,t){"use strict";t.r(n);var o=t(74),r=t.n(o),a=t(350),i=t.n(a),s=(t(356),t(104)),l=t(336),c=function(){return(c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};var u,d=function(){return Object(o.useContext)(f).scene},h={engine:null,canvas:null,scene:null,sceneReady:!1},f=Object(o.createContext)(h),v=function(e){var n=Object(o.useRef)(null),t=e.antialias,a=e.engineOptions,i=e.adaptToDeviceRatio,s=e.sceneOptions,u=e.onRender,d=(e.onSceneReady,e.renderChildrenWhenReady),v=e.children,p=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","renderChildrenWhenReady","children"]),m=Object(o.useState)(h),g=m[0],b=m[1];return Object(o.useEffect)((function(){if(n.current){var o=new l.a(n.current,t,a,i),r=new l.b(o,s),c=r.isReady();c?e.onSceneReady(r):r.onReadyObservable.addOnce((function(t){e.onSceneReady(t),b((function(){return{canvas:n.current,scene:t,engine:o,sceneReady:!0}}))})),o.runRenderLoop((function(){"function"===typeof u&&u(r),r.render()}));var d=function(){r.getEngine().resize()};return window&&window.addEventListener("resize",d),b((function(){return{canvas:n.current,scene:r,engine:o,sceneReady:c}})),function(){r.getEngine().dispose(),window&&window.removeEventListener("resize",d)}}}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",c({ref:n},p)),r.a.createElement(f.Provider,{value:g},(!0!==d||!0===d&&g.sceneReady)&&v))},p=(t(358),t(231));function m(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{l(o.next(e))}catch(n){a(n)}}function s(e){try{l(o.throw(e))}catch(n){a(n)}}function l(e){e.done?r(e.value):new t((function(n){n(e.value)})).then(i,s)}l((o=o.apply(e,n||[])).next())}))}function g(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(s){a=[6,s],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}!function(e){e.Binary="Binary",e.Mesh="Mesh",e.Texture="Texture"}(u||(u={}));var b,w=r.a.createContext(void 0),y=function(e){var n=Object(o.useState)(void 0),t=n[0],a=n[1];return r.a.createElement(w.Provider,{value:{lastProgress:t,updateProgress:a}},e.children)},M=function(e){switch(e.taskType){case u.Binary:return"binary:"+e.url;case u.Mesh:return"mesh:"+e.rootUrl+"/"+e.sceneFilename;case u.Texture:return"texture:"+e.url;default:throw new Error("Unknown task type: "+JSON.stringify(e))}},E=function(){var e={},n=null,t={};return function(r,a){var i=d(),s=a||{useDefaultLoadingScreen:!1};if(void 0===s.scene&&null===i)throw new Error("useAssetManager can only be used inside a Scene component (or pass scene as an option)");var l=Object(o.useContext)(w),c=s.scene||i;null==n?n=c:n!==c&&(e={},t={},n=c);var h=JSON.stringify(r);return void 0===e[h]&&(e[h]=function(n){if(!Array.isArray(n))throw new Error("Asset Manager tasks must be an array");var o=new Map,r=new p.b(c),a=[];n.forEach((function(n){var t=M(n);if(void 0!==t&&e[t])a.push(e[t]);else switch(n.taskType){case u.Binary:var i=r.addBinaryFileTask(n.name,n.url);o.set(i,n);break;case u.Mesh:var s=r.addMeshTask(n.name,n.meshesNames,n.rootUrl,n.sceneFilename);o.set(s,n);break;case u.Texture:var l=r.addTextureTask(n.name,n.url,n.noMipmap,n.invertY,n.samplingMode);o.set(l,n);break;default:throw new Error("Only binary/mesh supported currently.  'taskType' found on "+JSON.stringify(n))}}));var i,d=function(e){var n=e.reduce((function(e,n){return e[n.name]=n,e}),{});return{tasks:e,taskNameMap:n}},h=n.length===a.length?new Promise((function(e){return e(d(a))})):new Promise((function(e,n){var i,c=!1;r.useDefaultLoadingScreen=null!==(i=s.useDefaultLoadingScreen)&&void 0!==i&&i,r.onFinish=function(n){if(n.forEach((function(e){if(o.has(e)){var n=o.get(e),r=M(n);t[r]=e}})),!1===c){var r=d(n.concat(a));e(r)}},!1!==s.reportProgress&&void 0!==l&&r.onProgressObservable.add((function(e,n){l.updateProgress({eventData:e,eventState:n})})),r.onTaskError=function(e){var t;c=!0,n("Failed task "+(e.errorObject?null!==(t=e.errorObject.message)&&void 0!==t?t:"no error message on '"+e.name+"'":e.name))},r.load()})),f=null,v=m(void 0,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,h];case 1:return i=n.sent(),[3,4];case 2:return e=n.sent(),f=e,[3,4];case 3:return v=null,[7];case 4:return[2]}}))}));return function(){if(v)throw v;if(null!==f)throw f;return i}}(r)),e[h]()}}();!function(e){e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"}(b||(b={}));var x,T=function(){function e(){this.status=b.Loading}return Object.defineProperty(e.prototype,"scaledToDimension",{get:function(){return this._scaledToDimension},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingInfo",{get:function(){if(!this.rootMesh)return null;var e=null,n=null;return this.rootMesh.getChildMeshes().forEach((function(t){var o=t.getBoundingInfo().boundingBox,r=o.minimumWorld,a=o.maximumWorld;e=null===e?r:p.e.Minimize(e,r),n=null===n?a:p.e.Maximize(n,a)})),null!==e&&null!=n?new p.c(e,n):null},enumerable:!1,configurable:!0}),e.prototype.scaleTo=function(e){var n=this.boundingInfo;if(n&&this.rootMesh){var t=e/Math.max(Math.abs(n.minimum.x-n.maximum.x),Math.abs(n.minimum.y-n.maximum.y),Math.abs(n.minimum.z-n.maximum.z));this.rootMesh.scaling.scaleInPlace(t),this._scaledToDimension=e}},e.prototype.dispose=function(){this.rootMesh&&(this.rootMesh.dispose(!1,!0),this.rootMesh=void 0,this.meshes=[]),this.particleSystems&&(this.particleSystems.forEach((function(e){e.dispose()})),this.particleSystems=[]),this.skeletons&&(this.skeletons.forEach((function(e){return e.dispose()})),this.skeletons=[]),this.animationGroups&&(this.animationGroups.forEach((function(e){return e.dispose()})),this.animationGroups=[])},e}(),O=r.a.createContext(void 0),C=function(e){var n=Object(o.useState)(null),t=n[0],a=n[1];return r.a.createElement(O.Provider,{value:{lastProgress:t,updateProgress:a}},e.children)},k=function(){var e={},n=null;return function(t,r,a,i){var s=i||{},l=d();if(void 0===s.scene&&null===l)throw new Error("useSceneLoader can only be used inside a Scene component (or pass scene as an option)");var c=s.scene||l;null==n?n=c:n!==c&&(e={},n=c);var u=Object(o.useContext)(O),h=t+"/"+r;return void 0===e[h]&&(e[h]=function(){var e,n=new Promise((function(e,n){var o=new T;o.status=b.Loading;var l=p.d.ImportMesh(void 0,t,r,c,(function(n,t,a,l){o.rootMesh=new p.a(r+"-root-model",c),!0===s.alwaysSelectAsActiveMesh&&(o.rootMesh.alwaysSelectAsActiveMesh=!0),o.meshes=[],n.forEach((function(e){o.meshes.push(e),e.parent||(e.parent=o.rootMesh),!0===s.receiveShadows&&(e.receiveShadows=!0)})),o.particleSystems=t,o.skeletons=a,o.animationGroups=l,o.status=b.Loaded,s.scaleToDimension&&o.scaleTo(s.scaleToDimension),(null===i||void 0===i?void 0:i.onModelLoaded)&&i.onModelLoaded(o),e(o)}),(function(e){!0===s.reportProgress&&void 0!==u&&u.updateProgress(e)}),(function(e,t,o){n(null!==o&&void 0!==o?o:t)}),a);o.loaderName=l?l.name:"no loader found"})),o=null,l=m(void 0,void 0,void 0,(function(){var t;return g(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,n];case 1:return e=r.sent(),[3,4];case 2:return t=r.sent(),o=t,[3,4];case 3:return l=null,[7];case 4:return[2]}}))}));return function(){if(l)throw l;if(null!==o)throw o;return e}}()),e[h]()}}(),P=(t(357),t(142)),R=function(e){var n=e.barColor,t=e.textColor,r=e.totalControls,a=Object(o.useContext)(w),i=Object(o.useRef)(null),l=d();return Object(o.useEffect)((function(){var e=s.e.CreatePlane("progress",{size:2},l);e.rotation.y=Math.PI;var o=P.a.CreateForMesh(e,1024,1024),a=new P.d("main-container");a.height=.25,a.width=1,a.thickness=12,a.cornerRadius=24,a.background=n;var c=new P.d("text-rect");c.height=.7,c.verticalAlignment=P.c.VERTICAL_ALIGNMENT_TOP,a.addControl(c);var u=new P.e("progress-text","loaded 0/".concat(r));u.fontStyle="bold",u.fontSize=200,u.color=t,c.addControl(u);var d=new P.d("background-rectangle");d.width=1,d.height=.3,d.background="#596877",d.cornerRadius=10,d.thickness=4,d.verticalAlignment=P.c.VERTICAL_ALIGNMENT_BOTTOM;var h=new P.b("progress-container");h.horizontalAlignment=P.c.HORIZONTAL_ALIGNMENT_LEFT,h.width=.98,h.left="".concat(1,"%"),h.height="".concat(80,"%"),d.addControl(h);var f=new P.d("progress-rectangle");f.horizontalAlignment=P.c.HORIZONTAL_ALIGNMENT_LEFT,f.background="#7BC14E",f.cornerRadius=10,f.thickness=4,f.width=0,h.addControl(f);var v=new P.e("progress-text-overlay");return v.text="0%",v.fontSize=48,v.fontFamily="Arial",v.color="white",v.verticalAlignment=P.c.VERTICAL_ALIGNMENT_CENTER,v.horizontalAlignment=P.c.HORIZONTAL_ALIGNMENT_CENTER,d.addControl(v),a.addControl(d),i.current={textRef:u,progressRect:f,progressText:v},o.addControl(a),function(){setTimeout((function(){o.dispose(),e.dispose(),i.current=null}),500)}}),[]),Object(o.useEffect)((function(){if(i.current&&(null===a||void 0===a?void 0:a.lastProgress)){var e=a.lastProgress.eventData;i.current.textRef.text="loaded ".concat(e.totalCount-e.remainingCount,"/").concat(e.totalCount);var n=(e.totalCount-e.remainingCount)/e.totalCount;i.current.progressRect.width=n,i.current.progressText.text="".concat((100*n).toFixed(0),"%")}}),[i,null===a||void 0===a?void 0:a.lastProgress]),null},S="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/",L=[{taskType:u.Mesh,rootUrl:"".concat(S,"BoomBox/glTF/"),sceneFilename:"BoomBox.gltf",name:"boombox"},{taskType:u.Mesh,rootUrl:"".concat(S,"Avocado/glTF/"),sceneFilename:"Avocado.gltf",name:"avocado"}],j=function(e){var n=e.boomboxPosition,t=e.avocadoPosition,o=E(L),r=o.taskNameMap.boombox;r.loadedMeshes[0].position=n,r.loadedMeshes[1].scaling=new s.h(35,35,35);var a=o.taskNameMap.avocado;return a.loadedMeshes[0].position=t,a.loadedMeshes[1].scaling=new s.h(20,20,20),null},A=function(e){var n=e.position,t=e.width,r=e.height,a=e.depth,i=e.barColor,l=Object(o.useRef)(null),c=Object(o.useContext)(O),u=d();return Object(o.useEffect)((function(){var e=new s.g("fallback-parent",u);e.position=n;var o=null!==r&&void 0!==r?r:1,c=null!==a&&void 0!==a?a:.1,d=s.e.CreateBox("fallback-progress",{width:t,height:o,depth:c},u);d.parent=e,d.position=new s.h(t/2,0,0),d.setPivotMatrix(s.d.Translation(-t,0,0)),d.setPreTransformMatrix(s.d.Translation(-t/2,0,0));var h=new s.f("fallback-mat",u);h.diffuseColor=i,h.specularColor=s.b.Black(),d.material=h,l.current=d;var f=Math.min(null!==a&&void 0!==a?a:.1,.1),v=s.e.CreateBox("fallback-back",{width:t,height:o,depth:f},u);return v.parent=e,v.position=new s.h(0,0,c/-2+f/-2),function(){d.dispose(),v.dispose(),e.dispose(),l.current=null}}),[]),Object(o.useEffect)((function(){if(l.current){var e=null===c||void 0===c?void 0:c.lastProgress;if(e){var n=!0===e.lengthComputable?e.loaded/e.total:0;l.current.scaling=new s.h(n,1,1)}else l.current.scaling=new s.h(0,1,1)}}),[l,null===c||void 0===c?void 0:c.lastProgress]),null},N=function(e){var n=e.position,t=k("https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/","WaterBottle.gltf",void 0,{reportProgress:!0,scaleToDimension:2,onModelLoaded:function(e){e.status===b.Loaded?(console.log("Model Loaded:",n,e),e.rootMesh.position=n):console.log("Model not loaded",e)}});return console.log("water bottle:",t),null},I=function(e){var n=new s.a("camera1",Math.PI/2,.45*Math.PI,8,s.h.Zero(),e),t=e.getEngine().getRenderingCanvas();n.attachControl(t,!0),new s.c("light",new s.h(0,1,0),e).intensity=.7,(x=s.e.CreateBox("box",{size:.5},e)).position.y=-.5,s.e.CreateGround("ground",{width:6,height:6},e).position.y=-.75},B=function(e){if(void 0!==x){var n=e.getEngine().getDeltaTime();x.rotation.y+=10/60*Math.PI*2*(n/1e3)}},F=new s.h(0,1.5,0),z=new s.h(2.5,.5,0),D=new s.h(-2.5,0,0),G=function(){return r.a.createElement("div",null,r.a.createElement(v,{antialias:!0,onSceneReady:I,onRender:B,id:"my-canvas",renderChildrenWhenReady:!0},r.a.createElement(y,null,r.a.createElement(o.Suspense,{fallback:r.a.createElement(R,{barColor:"#666666",textColor:"white",totalControls:2})},r.a.createElement(j,{boomboxPosition:z,avocadoPosition:D}))),r.a.createElement(C,null,r.a.createElement(o.Suspense,{fallback:r.a.createElement(A,{position:F,width:2,height:.5,depth:.2,barColor:s.b.Red()})},r.a.createElement(N,{position:F})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[351,1,2]]]);