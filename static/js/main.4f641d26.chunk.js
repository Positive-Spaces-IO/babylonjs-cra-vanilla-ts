/*! For license information please see main.4f641d26.chunk.js.LICENSE.txt */
(this["webpackJsonpbabylonjs-cra-vanilla-ts"]=this["webpackJsonpbabylonjs-cra-vanilla-ts"]||[]).push([[0],{352:function(e,n,t){e.exports=t(360)},357:function(e,n,t){},358:function(e,n,t){},360:function(e,n,t){"use strict";t.r(n);var r=t(67),o=t.n(r),a=t(350),i=t.n(a),s=(t(357),t(351)),c=t(92),l=t(336),u=function(){return(u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};var d,f=function(){return Object(r.useContext)(v).scene},h={engine:null,canvas:null,scene:null,sceneReady:!1},v=Object(r.createContext)(h),p=function(e){var n=Object(r.useRef)(null),t=e.antialias,a=e.engineOptions,i=e.adaptToDeviceRatio,s=e.sceneOptions,c=e.onRender,d=(e.onSceneReady,e.renderChildrenWhenReady),f=e.children,p=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","renderChildrenWhenReady","children"]),m=Object(r.useState)(h),g=m[0],b=m[1];return Object(r.useEffect)((function(){if(n.current){var r=new l.a(n.current,t,a,i),o=new l.b(r,s),u=o.isReady();u?e.onSceneReady(o):o.onReadyObservable.addOnce((function(t){e.onSceneReady(t),b((function(){return{canvas:n.current,scene:t,engine:r,sceneReady:!0}}))})),r.runRenderLoop((function(){o.activeCamera?("function"===typeof c&&c(o),o.render()):console.warn("no active camera..")}));var d=function(){o.getEngine().resize()};return window&&window.addEventListener("resize",d),b((function(){return{canvas:n.current,scene:o,engine:r,sceneReady:u}})),function(){o.getEngine().dispose(),window&&window.removeEventListener("resize",d)}}}),[n]),o.a.createElement(o.a.Fragment,null,o.a.createElement("canvas",u({ref:n},p)),o.a.createElement(v.Provider,{value:g},(!0!==d||!0===d&&g.sceneReady)&&f))},m=(t(359),t(231));function g(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(n){a(n)}}function s(e){try{c(r.throw(e))}catch(n){a(n)}}function c(e){e.done?o(e.value):new t((function(n){n(e.value)})).then(i,s)}c((r=r.apply(e,n||[])).next())}))}function b(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(s){a=[6,s],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}!function(e){e.Binary="Binary",e.Mesh="Mesh",e.Texture="Texture"}(d||(d={}));var w,y=o.a.createContext(void 0),E=function(e){var n=Object(r.useState)(void 0),t=n[0],a=n[1];return o.a.createElement(y.Provider,{value:{lastProgress:t,updateProgress:a}},e.children)},O=function(e){switch(e.taskType){case d.Binary:return"binary:"+e.url;case d.Mesh:return"mesh:"+e.rootUrl+"/"+e.sceneFilename;case d.Texture:return"texture:"+e.url;default:throw new Error("Unknown task type: "+JSON.stringify(e))}},M=function(){var e={},n=null,t={};return function(o,a){var i=f(),s=a||{useDefaultLoadingScreen:!1};if(void 0===s.scene&&null===i)throw new Error("useAssetManager can only be used inside a Scene component (or pass scene as an option)");var c=Object(r.useContext)(y),l=s.scene||i;null==n?n=l:n!==l&&(e={},t={},n=l);var u=JSON.stringify(o);return void 0===e[u]&&(e[u]=function(n){if(!Array.isArray(n))throw new Error("Asset Manager tasks must be an array");var r=new Map,o=new m.b(l),a=[];n.forEach((function(n){var t=O(n);if(void 0!==t&&e[t])a.push(e[t]);else switch(n.taskType){case d.Binary:var i=o.addBinaryFileTask(n.name,n.url);r.set(i,n);break;case d.Mesh:var s=o.addMeshTask(n.name,n.meshesNames,n.rootUrl,n.sceneFilename);r.set(s,n);break;case d.Texture:var c=o.addTextureTask(n.name,n.url,n.noMipmap,n.invertY,n.samplingMode);r.set(c,n);break;default:throw new Error("Only binary/mesh supported currently.  'taskType' found on "+JSON.stringify(n))}}));var i,u=function(e){var n=e.reduce((function(e,n){return e[n.name]=n,e}),{});return{tasks:e,taskNameMap:n}},f=n.length===a.length?new Promise((function(e){return e(u(a))})):new Promise((function(e,n){var i,l=!1;o.useDefaultLoadingScreen=null!==(i=s.useDefaultLoadingScreen)&&void 0!==i&&i,o.onFinish=function(n){if(n.forEach((function(e){if(r.has(e)){var n=r.get(e),o=O(n);t[o]=e}})),!1===l){var o=u(n.concat(a));e(o)}},!1!==s.reportProgress&&void 0!==c&&o.onProgressObservable.add((function(e,n){c.updateProgress({eventData:e,eventState:n})})),o.onTaskError=function(e){var t;l=!0,n("Failed task "+(e.errorObject?null!==(t=e.errorObject.message)&&void 0!==t?t:"no error message on '"+e.name+"'":e.name))},o.load()})),h=null,v=g(void 0,void 0,void 0,(function(){var e;return b(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,f];case 1:return i=n.sent(),[3,4];case 2:return e=n.sent(),h=e,[3,4];case 3:return v=null,[7];case 4:return[2]}}))}));return function(){if(v)throw v;if(null!==h)throw h;return i}}(o)),e[u]()}}();!function(e){e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"}(w||(w={}));var x=function(){function e(){this.status=w.Loading}return Object.defineProperty(e.prototype,"scaledToDimension",{get:function(){return this._scaledToDimension},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingInfo",{get:function(){if(!this.rootMesh)return null;var e=null,n=null;return this.rootMesh.getChildMeshes().forEach((function(t){var r=t.getBoundingInfo().boundingBox,o=r.minimumWorld,a=r.maximumWorld;e=null===e?o:m.e.Minimize(e,o),n=null===n?a:m.e.Maximize(n,a)})),null!==e&&null!=n?new m.c(e,n):null},enumerable:!1,configurable:!0}),e.prototype.scaleTo=function(e){var n=this.boundingInfo;if(n&&this.rootMesh){var t=e/Math.max(Math.abs(n.minimum.x-n.maximum.x),Math.abs(n.minimum.y-n.maximum.y),Math.abs(n.minimum.z-n.maximum.z));this.rootMesh.scaling.scaleInPlace(t),this._scaledToDimension=e}},e.prototype.dispose=function(){this.rootMesh&&(this.rootMesh.dispose(!1,!0),this.rootMesh=void 0,this.meshes=[]),this.particleSystems&&(this.particleSystems.forEach((function(e){e.dispose()})),this.particleSystems=[]),this.skeletons&&(this.skeletons.forEach((function(e){return e.dispose()})),this.skeletons=[]),this.animationGroups&&(this.animationGroups.forEach((function(e){return e.dispose()})),this.animationGroups=[])},e}(),C=o.a.createContext(void 0),T=function(e){var n=Object(r.useState)(null),t=n[0],a=n[1];return o.a.createElement(C.Provider,{value:{lastProgress:t,updateProgress:a}},e.children)},k=function(){var e={},n=null;return function(t,o,a,i){var s=i||{},c=f();if(void 0===s.scene&&null===c)throw new Error("useSceneLoader can only be used inside a Scene component (or pass scene as an option)");var l=s.scene||c;null==n?n=l:n!==l&&(e={},n=l);var u=Object(r.useContext)(C),d=t+"/"+o;return void 0===e[d]&&(e[d]=function(){var e,n=new Promise((function(e,n){var r=new x;r.status=w.Loading;var c=m.d.ImportMesh(void 0,t,o,l,(function(n,t,a,c){r.rootMesh=new m.a(o+"-root-model",l),!0===s.alwaysSelectAsActiveMesh&&(r.rootMesh.alwaysSelectAsActiveMesh=!0),r.meshes=[],n.forEach((function(e){r.meshes.push(e),e.parent||(e.parent=r.rootMesh),!0===s.receiveShadows&&(e.receiveShadows=!0)})),r.particleSystems=t,r.skeletons=a,r.animationGroups=c,r.status=w.Loaded,s.scaleToDimension&&r.scaleTo(s.scaleToDimension),(null===i||void 0===i?void 0:i.onModelLoaded)&&i.onModelLoaded(r),e(r)}),(function(e){!0===s.reportProgress&&void 0!==u&&u.updateProgress(e)}),(function(e,t,r){n(null!==r&&void 0!==r?r:t)}),a);r.loaderName=c?c.name:"no loader found"})),r=null,c=g(void 0,void 0,void 0,(function(){var t;return b(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),[4,n];case 1:return e=o.sent(),[3,4];case 2:return t=o.sent(),r=t,[3,4];case 3:return c=null,[7];case 4:return[2]}}))}));return function(){if(c)throw c;if(null!==r)throw r;return e}}()),e[d]()}}(),R=(t(358),t(142)),P=function(e){var n=e.barColor,t=e.textColor,o=e.totalControls,a=Object(r.useContext)(y),i=Object(r.useRef)(null),s=f();return Object(r.useEffect)((function(){var e=c.e.CreatePlane("progress",{size:2},s);e.rotation.y=Math.PI;var r=R.a.CreateForMesh(e,1024,1024),a=new R.d("main-container");a.height=.25,a.width=1,a.thickness=12,a.cornerRadius=24,a.background=n;var l=new R.d("text-rect");l.height=.7,l.verticalAlignment=R.c.VERTICAL_ALIGNMENT_TOP,a.addControl(l);var u=new R.e("progress-text","loaded 0/".concat(o));u.fontStyle="bold",u.fontSize=200,u.color=t,l.addControl(u);var d=new R.d("background-rectangle");d.width=1,d.height=.3,d.background="#596877",d.cornerRadius=10,d.thickness=4,d.verticalAlignment=R.c.VERTICAL_ALIGNMENT_BOTTOM;var f=new R.b("progress-container");f.horizontalAlignment=R.c.HORIZONTAL_ALIGNMENT_LEFT,f.width=.98,f.left="".concat(1,"%"),f.height="".concat(80,"%"),d.addControl(f);var h=new R.d("progress-rectangle");h.horizontalAlignment=R.c.HORIZONTAL_ALIGNMENT_LEFT,h.background="#7BC14E",h.cornerRadius=10,h.thickness=4,h.width=0,f.addControl(h);var v=new R.e("progress-text-overlay");return v.text="0%",v.fontSize=48,v.fontFamily="Arial",v.color="white",v.verticalAlignment=R.c.VERTICAL_ALIGNMENT_CENTER,v.horizontalAlignment=R.c.HORIZONTAL_ALIGNMENT_CENTER,d.addControl(v),a.addControl(d),i.current={textRef:u,progressRect:h,progressText:v},r.addControl(a),function(){setTimeout((function(){r.dispose(),e.dispose(),i.current=null}),500)}}),[]),Object(r.useEffect)((function(){if(i.current&&(null===a||void 0===a?void 0:a.lastProgress)){var e=a.lastProgress.eventData;i.current.textRef.text="loaded ".concat(e.totalCount-e.remainingCount,"/").concat(e.totalCount);var n=(e.totalCount-e.remainingCount)/e.totalCount;i.current.progressRect.width=n,i.current.progressText.text="".concat((100*n).toFixed(0),"%")}}),[i,null===a||void 0===a?void 0:a.lastProgress]),null},S="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/",j=[{taskType:d.Mesh,rootUrl:"".concat(S,"BoomBox/glTF/"),sceneFilename:"BoomBox.gltf",name:"boombox"},{taskType:d.Mesh,rootUrl:"".concat(S,"Avocado/glTF/"),sceneFilename:"Avocado.gltf",name:"avocado"}],L=function(e){var n=e.boomboxPosition,t=e.avocadoPosition,r=M(j),o=r.taskNameMap.boombox;o.loadedMeshes[0].position=n,o.loadedMeshes[1].scaling=new c.h(35,35,35);var a=r.taskNameMap.avocado;return a.loadedMeshes[0].position=t,a.loadedMeshes[1].scaling=new c.h(20,20,20),null},A=function(e){var n=e.position,t=e.width,o=e.height,a=e.depth,i=e.barColor,s=Object(r.useRef)(null),l=Object(r.useContext)(C),u=f();return Object(r.useEffect)((function(){var e=new c.g("fallback-parent",u);e.position=n;var r=null!==o&&void 0!==o?o:1,l=null!==a&&void 0!==a?a:.1,d=c.e.CreateBox("fallback-progress",{width:t,height:r,depth:l},u);d.parent=e,d.position=new c.h(t/2,0,0),d.setPivotMatrix(c.d.Translation(-t,0,0)),d.setPreTransformMatrix(c.d.Translation(-t/2,0,0));var f=new c.f("fallback-mat",u);f.diffuseColor=i,f.specularColor=c.b.Black(),d.material=f,s.current=d;var h=Math.min(null!==a&&void 0!==a?a:.1,.1),v=c.e.CreateBox("fallback-back",{width:t,height:r,depth:h},u);return v.parent=e,v.position=new c.h(0,0,l/-2+h/-2),function(){d.dispose(),v.dispose(),e.dispose(),s.current=null}}),[]),Object(r.useEffect)((function(){if(s.current){var e=null===l||void 0===l?void 0:l.lastProgress;if(e){var n=!0===e.lengthComputable?e.loaded/e.total:0;s.current.scaling=new c.h(n,1,1)}else s.current.scaling=new c.h(0,1,1)}}),[s,null===l||void 0===l?void 0:l.lastProgress]),null},B=function(e){var n=e.position;return k("https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/","WaterBottle.gltf",void 0,{reportProgress:!0,scaleToDimension:2,onModelLoaded:function(e){e.status===w.Loaded?(console.log("Model Loaded:",n,e),e.rootMesh.position=n):console.log("Model not loaded",e)}}),null},N=function(e){var n=e.radius,t=function(e,n,t){void 0===n&&(n=!0),void 0===t&&(t=!0);var o=Object(r.useContext)(v).scene,a=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(null!==o){var r=e(o);if(console.log("created camera:",r),!0===n){var i=o.getEngine().getRenderingCanvas();r.attachControl(i,t)}return a.current=r,function(){if(!0===n){var e=o.getEngine().getRenderingCanvas();r.detachControl(e)}r.dispose()}}console.warn("cannot create camera (scene not ready)")}),[o]),a.current}((function(e){return console.log("creating camera..."),new c.a("camera1",Math.PI/2,.45*Math.PI,n,c.h.Zero(),e)}));return t&&(t.radius=n),null},I=function(e){var n=e.position,t=e.color,o=Object(r.useRef)(),a=f();return Object(r.useEffect)((function(){if(null!==a){var e=c.e.CreateBox("box",{size:.5},a);e.position=n;var r=new c.f("box",a);return r.diffuseColor=t,r.specularColor=c.b.Black(),e.material=r,o.current=e,function(){null===e||void 0===e||e.dispose()}}}),[a]),function(e,n,t,o){var a=Object(r.useContext)(v).scene;Object(r.useEffect)((function(){if(null!==a){var r=!0===o,i=a.onBeforeRenderObservable.add(e,n,t,void 0,r);return!0!==r?function(){a.onBeforeRenderObservable.remove(i)}:void 0}}))}((function(e){if(o.current){var n=e.getEngine().getDeltaTime();o.current.rotation.y+=10/60*Math.PI*2*(n/1e3)}})),o.current&&(o.current.position=n),null},F=function(e){new c.c("light",new c.h(0,1,0),e).intensity=.7,c.e.CreateGround("ground",{width:6,height:6},e).position.y=-.75},z=new c.h(0,1.5,0),D=new c.h(2.5,.5,0),G=new c.h(-2.5,0,0),_=function(){var e=Object(r.useState)(8),n=Object(s.a)(e,2),t=n[0],a=n[1];return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return a(10===t?6:10)}},"zoom"),o.a.createElement(p,{antialias:!0,onSceneReady:F,id:"my-canvas",renderChildrenWhenReady:!0},[[t/2,t/2],[t/-2,t/-2],[t/2,t/-2],[t/-2,t/2]].map((function(e,n){return o.a.createElement(I,{key:"box-".concat(n),position:new c.h(e[0],0,e[1]),color:n%2===0?c.b.Red():c.b.Blue()})})),o.a.createElement(N,{radius:t+2}),o.a.createElement(E,null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(P,{barColor:"#666666",textColor:"white",totalControls:2})},o.a.createElement(L,{boomboxPosition:D,avocadoPosition:G}))),o.a.createElement(T,null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(A,{position:z,width:2,height:.5,depth:.2,barColor:c.b.Red()})},o.a.createElement(B,{position:z})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[352,1,2]]]);